<html>
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">

    <!-- Range Slider -->
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script>
        $(function () {
            $("#slider-range").slider({
                range: true,
                min: {{data.release_year_range[0]}},
                max: {{data.release_year_range[1]}},
                values: [{{filter.release_year_range[0]}}, {{filter.release_year_range[1]}}],

                slide: function (event, ui) {
                    $("#release_year_min").val(ui.values[0] );
                    $("#release_year_max").val(ui.values[1] );
                }
            });
            $("#release_year_min").val($("#slider-range").slider("values", 0));
            $("#release_year_max").val($("#slider-range").slider("values", 1));
        });
    </script>

    <!-- Select2 Multiselect Dropdown -->
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet"/>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <script>
        $(document).ready(function () {
            $('.js-example-basic-multiple').select2();
        });
    </script>

    <!-- D3js -->
    <script src="http://d3js.org/d3.v3.min.js"></script>

    <!-- Our Stuff -->
    <title>Maps of Anime</title>
    <link rel="stylesheet" href="{{ url_for('static',filename='styles/styles.css') }}">
    <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.jpg') }}">
</head>
<body >
<h1>Maps of Anime</h1>
<form method="post">
    <table id="form">
        <tr>
            <td><label>Studios: </label></td>
            <td><select class="js-example-basic-multiple" name="studios[]" multiple="multiple">
                <option value="-1" {% if -1 in filter.studios %} selected="true" {% endif %}>All</option>
                {%  for studio in data.studios %}
                    <option value="{{ loop.index }}" {% if loop.index in filter.studios %} selected="true" {% endif %}> {{ studio }}</option>
                {% endfor %}
            </select></td>
        </tr>
        <tr>
            <td><label>Release Year: </label></td>
            <td>
                <input type="text" id="release_year_min" name="release_year_min" readonly style="width: 40px; border:0;  font-weight:bold;"> - <input type="text" id="release_year_max" name="release_year_max" readonly style="width: 40px; border:0;  font-weight:bold;">
                <div id="slider-range"></div>
            </td>

        </tr>
        <tr>
            <td><label>Media Type: </label></td>
            <td><select class="js-example-basic-multiple" name="media_types[]" multiple="multiple">
                <option value="-1" {% if -1 in filter.media_types %} selected="true" {% endif %}>All</option>
                {%  for media_type in data.media_types %}
                    <option value="{{ loop.index }}" {% if loop.index in filter.media_types %} selected="true" {% endif %}> {{ media_type }}</option>
                {% endfor %}
            </select></td>
        </tr>
    </table>

    <input type="submit">
</form>

<!-- Bootstrap Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>
</body>

</html>
